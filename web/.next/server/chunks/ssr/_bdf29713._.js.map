{"version":3,"sources":["../../../../context/WalletContext.tsx","../../../../pages/_app.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\n\ninterface WalletContextType {\n  connect: (moduleId: string) => Promise<void>;\n  disconnect: () => Promise<void>;\n  address: string | null;\n  isConnected: boolean;\n  isConnecting: boolean;\n  selectedWalletId: string | null;\n  openModal: () => void;\n  closeModal: () => void;\n  isModalOpen: boolean;\n  supportedWallets: { id: string; name: string; icon: string }[];\n  error: string | null;\n}\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined);\n\nexport const useWallet = () => {\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error(\"useWallet must be used within a WalletProvider\");\n  }\n  return context;\n};\n\nexport const WalletProvider = ({ children }: { children: React.ReactNode }) => {\n  const [address, setAddress] = useState<string | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [selectedWalletId, setSelectedWalletId] = useState<string | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [kit, setKit] = useState<any>(null);\n\n  useEffect(() => {\n    const initKit = async () => {\n      try {\n        const walletKitModule = await import(\"@creit.tech/stellar-wallets-kit\");\n\n        const kitInstance = new walletKitModule.StellarWalletsKit({\n          network: walletKitModule.WalletNetwork.TESTNET,\n          selectedWalletId: walletKitModule.FREIGHTER_ID,\n          modules: walletKitModule.allowAllModules(),\n        });\n\n        setKit(kitInstance);\n\n        const savedAddress = localStorage.getItem(\"inheritx_wallet_address\");\n        const savedWalletId = localStorage.getItem(\"inheritx_wallet_id\");\n        if (savedAddress && savedWalletId) {\n          setAddress(savedAddress);\n          setSelectedWalletId(savedWalletId);\n        }\n      } catch (err) {\n        console.error(\"Failed to initialize wallet kit:\", err);\n        setError(\"Failed to load wallet kit\");\n      }\n    };\n\n    initKit();\n  }, []);\n\n  const supportedWallets = [\n    { id: \"freighter\", name: \"Freighter\", icon: \"/icons/freighter.png\" },\n    { id: \"albedo\", name: \"Albedo\", icon: \"/icons/albedo.png\" },\n    { id: \"xbull\", name: \"xBull\", icon: \"/icons/xbull.png\" },\n    { id: \"rabet\", name: \"Rabet\", icon: \"/icons/rabet.png\" },\n    { id: \"lobstr\", name: \"Lobstr\", icon: \"/icons/lobstr.png\" },\n  ];\n\n  const connectWallet = async (moduleId: string) => {\n    if (!kit) {\n      setError(\"Wallet kit not loaded yet\");\n      return;\n    }\n\n    setIsConnecting(true);\n    setError(null);\n\n    try {\n      kit.setWallet(moduleId);\n      const { address: walletAddress } = await kit.getAddress();\n\n      setAddress(walletAddress);\n      setSelectedWalletId(moduleId);\n      localStorage.setItem(\"inheritx_wallet_address\", walletAddress);\n      localStorage.setItem(\"inheritx_wallet_id\", moduleId);\n      setIsModalOpen(false);\n    } catch (err: any) {\n      const errorMessage = err?.message || \"Connection failed\";\n      setError(errorMessage);\n      console.error(\"Wallet connection failed:\", err);\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  const disconnect = async () => {\n    if (kit) {\n      try {\n        await kit.disconnect();\n      } catch (err) {\n        console.error(\"Disconnect error:\", err);\n      }\n    }\n    setAddress(null);\n    setSelectedWalletId(null);\n    setError(null);\n    localStorage.removeItem(\"inheritx_wallet_address\");\n    localStorage.removeItem(\"inheritx_wallet_id\");\n  };\n\n  const openModal = () => {\n    setError(null);\n    setIsModalOpen(true);\n  };\n\n  const closeModal = () => {\n    setError(null);\n    setIsModalOpen(false);\n  };\n\n  return (\n    <WalletContext.Provider\n      value={{\n        connect: connectWallet,\n        disconnect,\n        address,\n        isConnected: !!address,\n        isConnecting,\n        selectedWalletId,\n        openModal,\n        closeModal,\n        isModalOpen,\n        supportedWallets,\n        error,\n      }}\n    >\n      {children}\n    </WalletContext.Provider>\n  );\n};\n","import type { AppProps } from \"next/app\";\nimport \"../styles/globals.css\";\nimport { WalletProvider } from \"../context/WalletContext\";\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return (\n    <WalletProvider>\n      <Component {...pageProps} />\n    </WalletProvider>\n  );\n}\n"],"names":[],"mappings":"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"}